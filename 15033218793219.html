<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  文件编辑 - 小菜鸡
  
  </title>
 <meta name="description" content="个人博客">
 <link href="atom.xml" rel="alternate" title="小菜鸡" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">小菜鸡</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; 小菜鸡</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>容器</label></li>

          
            <li><a title="制作nginx和php的rpm包" href="15033225667618.html">制作nginx和php的rpm包</a></li>
          

      
        <li class="divider"></li>
        <li><label>web服务器</label></li>

          
            <li><a title="图解正向代理、反向代理、透明代理" href="15033223691311.html">图解正向代理、反向代理、透明代理</a></li>
          
            <li><a title="详解apache的allow和deny" href="15033200332645.html">详解apache的allow和deny</a></li>
          

      
        <li class="divider"></li>
        <li><label>linux编程</label></li>

          
            <li><a title="wait和waitpid详解" href="15033229130846.html">wait和waitpid详解</a></li>
          
            <li><a title="信号" href="15033227238921.html">信号</a></li>
          
            <li><a title="僵尸进程和孤儿进程" href="15033226512813.html">僵尸进程和孤儿进程</a></li>
          
            <li><a title="共享内存" href="15033226237472.html">共享内存</a></li>
          
            <li><a title="基于TCP的字符串传输程序" href="15033223148818.html">基于TCP的字符串传输程序</a></li>
          
            <li><a title="文件搜索" href="15033220404521.html">文件搜索</a></li>
          
            <li><a title="文件比较" href="15033218983068.html">文件比较</a></li>
          
            <li><a title="文件编辑" href="15033218793219.html">文件编辑</a></li>
          
            <li><a title="文件设置" href="15033218534320.html">文件设置</a></li>
          
            <li><a title="系统文件操作开发" href="15033218072587.html">系统文件操作开发</a></li>
          
            <li><a title="系统环境变量" href="15033217888989.html">系统环境变量</a></li>
          
            <li><a title="静态库和共享库开发" href="%E9%9D%99%E6%80%81%E5%BA%93%E5%92%8C%E5%85%B1%E4%BA%AB%E5%BA%93%E5%BC%80%E5%8F%91.html">静态库和共享库开发</a></li>
          

      
        <li class="divider"></li>
        <li><label>坑</label></li>

          
            <li><a title="<center>数据库非正常关闭导致无法启动问题</center>" href="15033220957416.html"><center>数据库非正常关闭导致无法启动问题</center></a></li>
          
            <li><a title="解决virtualbox安装增强工具失败的问题" href="15033217564988.html">解决virtualbox安装增强工具失败的问题</a></li>
          
            <li><a title="记一次ftp服务器搭建走过的坑" href="15033217230950.html">记一次ftp服务器搭建走过的坑</a></li>
          
            <li><a title="记一次mysql主从一致校验走过的坑" href="15033215794872.html">记一次mysql主从一致校验走过的坑</a></li>
          

      
        <li class="divider"></li>
        <li><label>日常运维</label></li>

          
            <li><a title="ubuntu mysql5.7源码安装" href="15033230940135.html">ubuntu mysql5.7源码安装</a></li>
          
            <li><a title="ubuntu php5.6源码安装" href="15033230316456.html">ubuntu php5.6源码安装</a></li>
          
            <li><a title="ubuntu下nginx的安裝" href="15033229668634.html">ubuntu下nginx的安裝</a></li>
          
            <li><a title="ubuntu安装php常见错误集锦" href="15033229497885.html">ubuntu安装php常见错误集锦</a></li>
          
            <li><a title="vim常用命令" href="15033229297218.html">vim常用命令</a></li>
          
            <li><a title="使用RAID进行磁盘管理" href="15033227857622.html">使用RAID进行磁盘管理</a></li>
          
            <li><a title="使用virt-manager创建和管理虚拟机" href="15033227559982.html">使用virt-manager创建和管理虚拟机</a></li>
          
            <li><a title="关于mysqld_safe" href="15033226078265.html">关于mysqld_safe</a></li>
          
            <li><a title="安装linux各种桌面环境" href="15033222846104.html">安装linux各种桌面环境</a></li>
          
            <li><a title="常用软件编译参数以及软件地址" href="15033222695994.html">常用软件编译参数以及软件地址</a></li>
          
            <li><a title="打造属于自己的vim利器" href="15033222443468.html">打造属于自己的vim利器</a></li>
          
            <li><a title="搭建本地yum源服务器" href="15033221654695.html">搭建本地yum源服务器</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>容器</span></li>
                        
                          <li><a title="制作nginx和php的rpm包" href="15033225667618.html">制作nginx和php的rpm包</a></li>
                        

                    
                      <li class="side-title"><span>web服务器</span></li>
                        
                          <li><a title="图解正向代理、反向代理、透明代理" href="15033223691311.html">图解正向代理、反向代理、透明代理</a></li>
                        
                          <li><a title="详解apache的allow和deny" href="15033200332645.html">详解apache的allow和deny</a></li>
                        

                    
                      <li class="side-title"><span>linux编程</span></li>
                        
                          <li><a title="wait和waitpid详解" href="15033229130846.html">wait和waitpid详解</a></li>
                        
                          <li><a title="信号" href="15033227238921.html">信号</a></li>
                        
                          <li><a title="僵尸进程和孤儿进程" href="15033226512813.html">僵尸进程和孤儿进程</a></li>
                        
                          <li><a title="共享内存" href="15033226237472.html">共享内存</a></li>
                        
                          <li><a title="基于TCP的字符串传输程序" href="15033223148818.html">基于TCP的字符串传输程序</a></li>
                        
                          <li><a title="文件搜索" href="15033220404521.html">文件搜索</a></li>
                        
                          <li><a title="文件比较" href="15033218983068.html">文件比较</a></li>
                        
                          <li><a title="文件编辑" href="15033218793219.html">文件编辑</a></li>
                        
                          <li><a title="文件设置" href="15033218534320.html">文件设置</a></li>
                        
                          <li><a title="系统文件操作开发" href="15033218072587.html">系统文件操作开发</a></li>
                        
                          <li><a title="系统环境变量" href="15033217888989.html">系统环境变量</a></li>
                        
                          <li><a title="静态库和共享库开发" href="%E9%9D%99%E6%80%81%E5%BA%93%E5%92%8C%E5%85%B1%E4%BA%AB%E5%BA%93%E5%BC%80%E5%8F%91.html">静态库和共享库开发</a></li>
                        

                    
                      <li class="side-title"><span>坑</span></li>
                        
                          <li><a title="<center>数据库非正常关闭导致无法启动问题</center>" href="15033220957416.html"><center>数据库非正常关闭导致无法启动问题</center></a></li>
                        
                          <li><a title="解决virtualbox安装增强工具失败的问题" href="15033217564988.html">解决virtualbox安装增强工具失败的问题</a></li>
                        
                          <li><a title="记一次ftp服务器搭建走过的坑" href="15033217230950.html">记一次ftp服务器搭建走过的坑</a></li>
                        
                          <li><a title="记一次mysql主从一致校验走过的坑" href="15033215794872.html">记一次mysql主从一致校验走过的坑</a></li>
                        

                    
                      <li class="side-title"><span>日常运维</span></li>
                        
                          <li><a title="ubuntu mysql5.7源码安装" href="15033230940135.html">ubuntu mysql5.7源码安装</a></li>
                        
                          <li><a title="ubuntu php5.6源码安装" href="15033230316456.html">ubuntu php5.6源码安装</a></li>
                        
                          <li><a title="ubuntu下nginx的安裝" href="15033229668634.html">ubuntu下nginx的安裝</a></li>
                        
                          <li><a title="ubuntu安装php常见错误集锦" href="15033229497885.html">ubuntu安装php常见错误集锦</a></li>
                        
                          <li><a title="vim常用命令" href="15033229297218.html">vim常用命令</a></li>
                        
                          <li><a title="使用RAID进行磁盘管理" href="15033227857622.html">使用RAID进行磁盘管理</a></li>
                        
                          <li><a title="使用virt-manager创建和管理虚拟机" href="15033227559982.html">使用virt-manager创建和管理虚拟机</a></li>
                        
                          <li><a title="关于mysqld_safe" href="15033226078265.html">关于mysqld_safe</a></li>
                        
                          <li><a title="安装linux各种桌面环境" href="15033222846104.html">安装linux各种桌面环境</a></li>
                        
                          <li><a title="常用软件编译参数以及软件地址" href="15033222695994.html">常用软件编译参数以及软件地址</a></li>
                        
                          <li><a title="打造属于自己的vim利器" href="15033222443468.html">打造属于自己的vim利器</a></li>
                        
                          <li><a title="搭建本地yum源服务器" href="15033221654695.html">搭建本地yum源服务器</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>文件编辑</h1>

<h4 id="toc_0">1、文件创建</h4>

<p>任务描述：</p>

<ul>
<li>输入要创建的文件名，输出是否创建成功信息</li>
</ul>

<p>相关知识：<br/>
　　FILE *fopen(const char *path, const char *mode)：创建文件<br/>
　　　　fopen函数打开一个文件，文件名由函数参数path给出。参数mode指向一个字符串，字符串中包含着访问文件的方式，具有有：<br/>
　　　　“r”: 以只读方式打开文件，该文件必须存在。<br/>
　　　　“w”： 打开只写文件，若文件存在则文件长度清为0，即该文件内容会消失。若文件不存在则建立该文件。<br/>
　　　　“r+”： 以可读写方式打开文件，该文件必须存在。<br/>
　　　　“w+”: 打开可读写文件，若文件存在则文件长度清为零，即该文件内容会消失。若文件不存在则建立该文件。<br/>
　　　　“a”： 以附加的方式打开只写文件。若文件不存在，则会建立该文件，如果文件存在，写入的数据会被加到文件尾，即文件原先的内容会被保留。<br/>
　　　　“a+”： 以附加方式打开可读写的文件。若文件不存在，则会建立该文件，如果文件存在，写入的数据会被加到文件尾后，即文件原先的内容会被保留。<br/>
　　　　如果打开文件成功，则fopen函数返回一个指向FILE结构体的指针，否则返回NULL，并把错误代码存在errno中。<br/>
　　　　FILE是个结构体，包含了管理文件流所需的各个信息，包括文件描述符，指向缓冲区的指针等。<br/>
　　　　使用w，w+，或a+，都可以创建一个文件。</p>

<p>　　int fclose(FILE* stream)：使用fclose函数来关闭fopen打开的文件流关闭一个流，可以把缓冲区内最后剩余的数据输出到磁盘文件中，并释放文件指针和有关的缓冲区。</p>

<p>main.c:</p>

<blockquote>
<pre><code>#include &quot;stdio.h&quot;
#include &quot;stdlib.h&quot;
int main(int argc,char *argv[]){
    FILE *fp;
    if(argc!=2){
        perror(&quot;argc error\n&quot;);
        exit(1);
    }
    fp=fopen(argv[1],&quot;w&quot;);
    if(fp==NULL){
        perror(&quot;fopen fail\n&quot;);
        exit(1);
    }else
        printf(&quot;create success\n&quot;);
    fclose(fp);
    return 0;
}
</code></pre>
</blockquote>

<h4 id="toc_1">2.文件写</h4>

<p>任务描述：</p>

<ul>
<li>输入文件名及要写入文件的字符串</li>
<li>每次需要在原有文件内容基础上追加写入</li>
</ul>

<p>相关知识：<br/>
size_t fwrite(void *ptr, size_t size, size_t nmemb, FILE *stream)：向文件中写入数据　　　　　　<br/>
　　　　ptr：用于获取数据的地址（指针）<br/>
　　　　size：单个元素的大小，单位是字节<br/>
　　　　nmemb：元素个数<br/>
　　　　stream：提供数据的文件指针<br/>
　　　　函数返回写入文件的元素的个数</p>

<p>main.c:</p>

<blockquote>
<pre><code>#include &quot;stdio.h&quot;
#include &quot;stdlib.h&quot;
#include &quot;string.h&quot;
int main(int argc,char *argv[]){
    FILE *fp;
    char str[20]={&#39;\0&#39;};
    if(argc!=3){
        perror(&quot;argc error\n&quot;);
        exit(1);
    }
    fp=fopen(argv[1],&quot;a+&quot;);
    if(fp==NULL){
        perror(&quot;fopen fail\n&quot;);
        exit(1);
    }
    strcpy(str,argv[2]);
    fwrite(str,1,strlen(str),fp);
    fclose(fp);
    return 0;
}
</code></pre>
</blockquote>

<h4 id="toc_2">3.文件读</h4>

<p>任务描述：</p>

<ul>
<li>命令行中以文本文件名做输入参数，打印文件中内容</li>
</ul>

<p>相关知识：<br/>
size_t fread(void *ptr, size_t size, size_t nmemb, FILE *stream)：从文件中读取数据　　　　<br/>
　　　　ptr：用于接收数据的地址（指针）<br/>
　　　　size：单个元素的大小，单位是字节<br/>
　　　　nmemb：元素个数<br/>
　　　　stream：提供数据的文件指针<br/>
　　　　返回值：读取的元素的个数</p>

<p>main.c:</p>

<blockquote>
<pre><code>#include &quot;stdio.h&quot;
#include &quot;stdlib.h&quot;
#include &quot;string.h&quot;
int main(int argc,char *argv[]){
    FILE *fp;
    char str[20]={&#39;\0&#39;};
    //memset(str,&#39;\0&#39;,20);
    if(argc!=2){
        perror(&quot;argc error\n&quot;);
        exit(1);
    }
    fp=fopen(argv[1],&quot;r&quot;);
    if(fp==NULL){
        perror(&quot;fopen fail\n&quot;);
        exit(1);
    }
    printf(&quot;The text in file is:&quot;);
    fread(str,1,20,fp);
    printf(&quot;%s&quot;,str);
    fclose(fp);
    return 0;    
}
</code></pre>
</blockquote>

<h4 id="toc_3">4.文件的重命名</h4>

<p>任务描述：</p>

<ul>
<li>输入文件名以及新文件名，输出是否成功命名文件</li>
</ul>

<p>相关知识：<br/>
int rename(const char *old_filename, const char *new_filename)：对文件进行重命名　　　　<br/>
　　　　old_filename: 包含将要被重命名的文件的原始名称。<br/>
　　　　new_filename:新的文件名称。</p>

<p>main.c:</p>

<blockquote>
<pre><code>#include &quot;stdio.h&quot;
#include &quot;stdlib.h&quot;
int main(int argc,char *argv[]){
    int a;
    if(argc!=3){
        perror(&quot;argc error\n&quot;);
        exit(1);
    }
    a=rename(argv[1],argv[2]);
    if(a==-1){
        perror(&quot;rename error\n&quot;);
        exit(1);
    }else
        printf(&quot;rename success\n&quot;);
    return 0;
}
</code></pre>
</blockquote>

<h4 id="toc_4">5.文件另存为</h4>

<p>任务描述：</p>

<ul>
<li>将已有文件另存为一个新的文件</li>
<li>综合文件的创建和读写操作</li>
</ul>

<p>main.c：</p>

<blockquote>
<pre><code>#include &quot;stdio.h&quot;
#include &quot;stdlib.h&quot;
int main(int argc,char *argv[]){
    FILE *fp1,*fp2;
    int n;char str[512]; 
    if(argc!=3){
        perror(&quot;argc error\n&quot;);
        exit(1);
    }
    fp1=fopen(argv[1],&quot;r&quot;);
    if(fp1==NULL){
        perror(&quot;fopen1 fail\n&quot;);
        exit(1);
    }
    fp2=fopen(argv[2],&quot;w&quot;);
    if(fp2==NULL){
        perror(&quot;fopen2 fail\n&quot;);
        exit(1);
    }
    n=fread(str,1,20,fp1);
    if(n==-1){
        perror(&quot;save fail\n&quot;);
        exit(1);
    }else{
        fwrite(str,1,n,fp2);
        printf(&quot;save success\n&quot;);
    }
    fclose(fp1);
    fclose(fp2);
    return 0;
}
</code></pre>
</blockquote>

<h4 id="toc_5">6.文件的删除</h4>

<p>任务描述：</p>

<ul>
<li>输入要删除的文件名，输出是否删除成功的信息</li>
</ul>

<p>相关知识：<br/>
int remove(const char *filename)：删除文件</p>

<p>main.c:</p>

<blockquote>
<pre><code>#include &quot;stdio.h&quot;
#include &quot;stdlib.h&quot;
int main(int argc,char *argv[]){
    FILE *fp1;int n;
    if(argc!=2){
        perror(&quot;argc error\n&quot;);
        exit(1);
    }
/*
    fp1=fopen(argv[1],&quot;r&quot;);
    if(fp1==NULL){
        perror(&quot;fopen1 fail\n&quot;);
        exit(1);
    }
*/
    n=remove(argv[1]);
    if(n!=0){
        perror(&quot;removr error\n&quot;);
        exit(1);
    }else
        printf(&quot;remove success\n&quot;);
    //fclose(fp1); 
    return 0;
}
</code></pre>
</blockquote>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15033218983068.html"  title="Previous Post: 文件比较">&laquo; 文件比较</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15033218534320.html" 
	        title="Next Post: 文件设置">文件设置 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15033218793219.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

  </body>
</html>
